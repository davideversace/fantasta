<!DOCTYPE html>
<html>
<head>
  <title>Astaaaa Fantacalcio</title>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <h1 id="giocatore">Nessun giocatore in asta</h1>
  <h2 id="offerta">Offerta: -</h2>
  <input id="nome" placeholder="Il tuo nome">
  <input id="valore" type="number" placeholder="Offri crediti">
  <button onclick="offri()">Offri</button>
  <br><br>
  <input id="nuovo" placeholder="Chiama nuovo giocatore">
  <button onclick="chiama()">Chiama giocatore</button>

  <script>
    const socket = io();

    socket.on("nuovaAsta", (dati) => {
      document.getElementById("giocatore").innerText = "Giocatore: " + dati.giocatore;
      document.getElementById("offerta").innerText = "Offerta: -";
    });

    socket.on("nuovaOfferta", (dati) => {
      document.getElementById("offerta").innerText = `Offerta: ${dati.offerta} da ${dati.nome}`;
    });

    function offri() {
      const nome = document.getElementById("nome").value;
      const valore = parseInt(document.getElementById("valore").value);
      socket.emit("faiOfferta", { nome, offerta: valore });
    }

    function chiama() {
      const giocatore = document.getElementById("nuovo").value;
      socket.emit("chiamaGiocatore", giocatore);
    }
  </script>
</body>
</html>